
{
    "id": "realistic-traffic-report",
    "title": "Traffic Citation",
    "description": "A realistic traffic infraction report.",
    "icon": "TrafficCone",
    "icon_color": "#f97316",
    "is_html_output": true,
    "custom_button_text": "Open MDC Record",
    "custom_button_link": "https://mdc.gta.world/record/{{defendant_name}}",
    "custom_button_replace_spaces": true,
    "output": "<table style=\"width:100%;font-family:'Times New Roman',serif;border-collapse:collapse;border:2px solid black;background-color:white;color:black;\"><tbody><tr><td colspan=\"4\" style=\"text-align:center;padding:8px;border-bottom:2px solid black;\"><h1 style=\"font-family:Arial,sans-serif;font-size:1.5rem;font-weight:700;margin:0;text-transform:uppercase;\">COUNTY OF LOS SANTOS</h1><h2 style=\"font-family:Arial,sans-serif;font-size:1rem;font-weight:600;margin:0;\">Notice to Appear - Traffic Citation</h2></td></tr><tr><td colspan=\"2\" style=\"padding:4px;border-bottom:1px solid black;border-right:1px solid black;\"><strong>Date:</strong> {{general.date}}</td><td colspan=\"2\" style=\"padding:4px;border-bottom:1px solid black;\"><strong>Time:</strong> {{general.time}}</td></tr><tr style=\"background-color:#e5e7eb;\"><td colspan=\"4\" style=\"padding:6px;border-top:1px solid black;border-bottom:1px solid black;text-align:center;font-weight:bold;\">DEFENDANT & VEHICLE INFORMATION</td></tr><tr><td style=\"padding:4px;\" colspan=\"2\"><strong>Name:</strong> {{defendant_name}}</td><td style=\"padding:4px;\" colspan=\"2\"><strong>License Status:</strong> {{defendant_license_status}}</td></tr><tr><td style=\"padding:4px;\" colspan=\"2\"><strong>Vehicle:</strong> {{vehicle_make_model}}</td><td style=\"padding:4px;\" colspan=\"2\"><strong>Plate:</strong> {{#if vehicle_plate}}{{vehicle_plate}}{{else}}N/A{{/if}}</td></tr><tr><td style=\"padding:4px;\" colspan=\"2\"><strong>Reg. Owner:</strong> {{#if vehicle_owner}}{{vehicle_owner}}{{else}}N/A{{/if}}</td><td style=\"padding:4px;\" colspan=\"2\"><strong>Insurance:</strong> {{#if vehicle_insured}}Insured{{else}}Uninsured{{/if}}</td></tr><tr><td style=\"padding:4px;\" colspan=\"4\"><strong>Location of Violation:</strong> {{location.street}}, {{location.district}}</td></tr><tr style=\"background-color:#e5e7eb;\"><td colspan=\"4\" style=\"padding:6px;border-top:2px solid black;border-bottom:1px solid black;text-align:center;font-weight:bold;\">VIOLATION(S)</td></tr><tr><td style=\"padding:4px;font-weight:bold;border-bottom:1px solid #ccc;\">Off. #</td><td style=\"padding:4px;font-weight:bold;border-bottom:1px solid #ccc;\" colspan=\"2\">Description</td><td style=\"padding:4px;font-weight:bold;border-bottom:1px solid #ccc;text-align:right;\">Fine</td></tr>{{#each charges}}<tr><td style=\"padding:4px;border-bottom:1px solid #eee;\">{{@index_1}}</td><td style=\"padding:4px;border-bottom:1px solid #eee;\" colspan=\"2\">{{#with (lookup @root.penalCode chargeId)}}{{charge}}{{/with}}</td><td style=\"padding:4px;border-bottom:1px solid #eee;text-align:right;\">${{fine}}</td></tr>{{/each}}<tr><td colspan=\"3\" style=\"padding:4px;text-align:right;font-weight:bold;border-top:1px solid black;\">Total Fine:</td><td style=\"padding:4px;text-align:right;font-weight:bold;border-top:1px solid black;\">${{charges_total_fine}}</td></tr><tr style=\"background-color:#e5e7eb;\"><td colspan=\"4\" style=\"padding:6px;border-top:2px solid black;border-bottom:1px solid black;text-align:center;font-weight:bold;\">NARRATIVE</td></tr><tr><td colspan=\"4\" style=\"padding:8px;min-height:100px;white-space:pre-wrap;border-bottom:2px solid black;\">{{narrative}}</td></tr><tr><td style=\"padding:4px;\"><strong>Issuing Officer:</strong></td><td style=\"padding:4px;\" colspan=\"2\">{{officers.0.name}}</td><td style=\"padding:4px;\"><strong>Badge #:</strong> {{officers.0.badgeNumber}}</td></tr></tbody></table>",
    "form": [
        { "type": "section", "title": "General Section" },
        { "type": "general", "name": "general" },
        { "type": "section", "title": "Officer Section" },
        { "type": "officer", "name": "officers", "showBadgeNumber": true, "multi": false },
        { "type": "section", "title": "Defendant Details" },
        { "type": "text", "name": "defendant_name", "label": "Defendant's Full Name", "placeholder": "Firstname Lastname", "required": true },
        { "type": "dropdown", "name": "defendant_license_status", "label": "Driver's License Status", "placeholder": "Select License Status", "options": ["Valid", "No License", "Expired", "Suspended", "Revoked"], "required": true },
        { "type": "section", "title": "Vehicle Details" },
        { "type": "group", "fields": [
            { "type": "better-switch", "name": "vehicle_registered", "label": "Registration Status", "dataOn": "Registered", "dataOff": "Unregistered", "defaultValue": true },
            { "type": "text", "name": "vehicle_owner", "label": "Registered Owner", "placeholder": "Firstname Lastname", "stipulation": {"field": "vehicle_registered", "value": true}},
            { "type": "text", "name": "vehicle_plate", "label": "Identification Plate", "placeholder": "###XXX", "stipulation": {"field": "vehicle_registered", "value": true}}
          ]
        },
        { "type": "group", "fields": [
            { "type": "better-switch", "name": "vehicle_insured", "label": "Insurance Status", "dataOn": "Insured", "dataOff": "Uninsured", "defaultValue": true }
          ]
        },
        { "type": "datalist", "name": "vehicle_make_model", "label": "Make & Model", "placeholder": "e.g. Benefactor Dubsta", "optionsSource": "vehicles", "required": true },
        { "type": "section", "title": "Location Details" },
        { "type": "location", "name": "location", "showDistrict": true },
        { "type": "section", "title": "Charges" },
        { 
            "type": "charge",
            "name": "charges",
            "showClass": true,
            "showOffense": true,
            "allowedTypes": { "M": false, "I": true },
            "allowedIds": "401-429,435-442",
            "customFields": [
                {
                    "type": "text",
                    "name": "fine",
                    "label": "Fine",
                    "placeholder": "Fine Amount"
                }
            ],
            "previewFields": { "fine": true, "impound": true, "suspension": true }
        },
        {
            "type": "hidden",
            "name": "charges_total_fine",
            "value": "{{#with (sum (pluck charges 'fine'))}}{{this}}{{/with}}"
        },
        { "type": "section", "title": "Narrative" },
        { "type": "textarea", "name": "narrative", "label": "Traffic Stop Narrative", "placeholder": "Witnessed the defendant to be...", "required": true }
    ],
    "countyCityStipulation": true
}
